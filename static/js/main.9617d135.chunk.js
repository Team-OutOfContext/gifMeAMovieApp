(this["webpackJsonpmovie-spoiler-project-five"]=this["webpackJsonpmovie-spoiler-project-five"]||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),i=a(12),n=a.n(i),r=(a(25),a(17)),l=a(13),c=a(14),m=a(15),u=a(18),h=a(16),g=a(19),p=a(2),d=a.n(p),v=(a(43),function(e){return o.a.createElement("ul",{className:"movie-results-part-one"},e.movieSuggestions.map((function(t){var a="";null!==t.poster_path&&(a="https://image.tmdb.org/t/p/w500".concat(t.poster_path));var s="",i="";return void 0===t.release_date||""===t.release_date?s="".concat(t.title):(i=t.release_date.slice(0,4),s="".concat(t.title," (").concat(i,")")),o.a.createElement("li",{className:"movie-listing",key:t.id,tabIndex:"0",onClick:function(){e.getMovieKeywords(t.id,t.title,i,a)}},o.a.createElement("p",null,s))})))}),f=function(e){return o.a.createElement("div",{class:"gif-results"},o.a.createElement("h2",null,"You chose"),o.a.createElement("h3",{class:"movie-title"},"Frozen"),o.a.createElement("ul",{class:"carousel","data-flickity":'{"autoPlay":true}'},o.a.createElement("li",{class:"carousel-cell"},o.a.createElement("img",{class:"carousel-cell-image",src:"https://media.giphy.com/media/s4Bi420mMDRBK/giphy.gif",alt:"gif"})),o.a.createElement("li",{class:"carousel-cell"},o.a.createElement("img",{class:"carousel-cell-image",src:"https://media.giphy.com/media/AUGqun7QALo0o/giphy.gif",alt:"gif"})),o.a.createElement("li",{class:"carousel-cell"},o.a.createElement("img",{class:"carousel-cell-image",src:"https://media.giphy.com/media/e8YmiFHeDtfMs/giphy.gif",alt:"gif"}))))},y=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).getUserInput=function(t){e.setState(Object(l.a)({},t.target.id,t.target.value))},e.getMovieDetails=function(){var t=RegExp(/\w/g);console.log(e.state.userInput.length),console.log(t.test(e.state.userInput)),t.test(e.state.userInput)&&d()({url:"https://api.themoviedb.org/3/search/movie",method:"GET",dataResponse:"json",params:{api_key:e.state.apiKeyMovieDb,query:e.state.userInput,include_adult:!1}}).then((function(t){0===t.data.results.length?e.setState({errorMessage:!0}):e.setState({movieSuggestions:t.data.results,autoSuggestions:!0})})).catch((function(t){e.setState({errorMessage:!0}),console.log(t)}))},e.getMovieKeywords=function(t,a,s,o){e.setState({movieTitle:a,movieYear:s,movieImageUrl:o,showLoadingScreen:!0}),d()({url:"https://api.themoviedb.org/3/movie/".concat(t,"/keywords"),method:"GET",dataResponse:"json",params:{api_key:e.state.apiKeyMovieDb,movie_id:t}}).then((function(t){console.log(t.data.keywords,"get movie keywords axios call"),e.setState({movieKeywords:t.data.keywords,userInput:"",autoSuggestions:!1}),e.filterKeywords()})).catch((function(t){e.makeGiphyApiCalls(3)}))},e.filterKeywords=function(){var t=RegExp(/(stinger)$/),a=e.state.movieKeywords.filter((function(e){return!t.test(e.name)}));e.setState({movieKeywords:a}),e.prepGiphyApiCalls()},e.prepGiphyApiCalls=function(){e.state.movieKeywords.length>=3?e.shuffleKeywordsArray():2===e.state.movieKeywords.length?e.makeGiphyApiCalls(1):1===e.state.movieKeywords.length?e.makeGiphyApiCalls(2):e.makeGiphyApiCalls(3)},e.getRandomGifs=function(){return d()({url:"https://api.giphy.com/v1/gifs/random",method:"GET",dataResponse:"json",params:{api_key:e.state.apiKeyGiphy,rating:"pg"}})},e.makeGiphyApiCalls=function(t){var a=[];e.state.movieKeywords.forEach((function(t){a.push(e.getKeywordGifs(t.name))}));for(var s=0;s<t;s++)a.push(e.getRandomGifs());e.prepGifData(a)},e.prepGifData=function(t){d.a.all(t).then((function(t){var a=[];t.forEach((function(e){var t="";if(!0===Array.isArray(e.data.data)){console.log(e.data.data);var s=Math.floor(Math.random()*e.data.data.length);t=e.data.data[s]}else t=e.data.data;a.push(t)})),e.setState({showLoadingScreen:!1,gifDataArray:a,showGifs:!0,showButton:!0}),console.log(a)})).catch((function(t){console.log(t),console.log("Sorry, this movie is not currently playing at our theatre! Please try another movie."),e.setState({showLoadingScreen:!1,noGifs:!0,showButton:!0})}))},e.shuffleKeywordsArray=function(){for(var t=Object(r.a)(e.state.movieKeywords),a=t.length-1;a>0;a--){var s=Math.floor(Math.random()*(a+1)),o=t[a],i=t[s];t[a]=i,t[s]=o}var n=t.slice(0,3);e.setState({movieKeywords:n}),e.makeGiphyApiCalls(0),console.log(e.state.movieKeywords[0].name)},e.getKeywordGifs=function(t){return d()({url:"https://api.giphy.com/v1/gifs/search",method:"GET",dataResponse:"json",params:{api_key:e.state.apiKeyGiphy,q:t}})},e.resetState=function(){e.setState({userInput:"",movieTitle:"",movieYear:"",movieImageUrl:"",movieKeywords:[],gifDataArray:[],showButton:!1,noGifs:!1,errorMessage:!1})},e.state={apiKeyMovieDb:"38f9a8f5c677f0356adca226f357b762",apiKeyGiphy:"x51UFN0xOVPnehx6f4dJxLphvkXnx19U",userInput:"",autoSuggestions:!1,movieSuggestions:["hi"],movieTitle:"",movieYear:"",movieImageUrl:"",movieKeywords:[],gifDataArray:[],showGifs:!1,noGifs:!1,showButton:!1,errorMessage:!1,showLoadingScreen:!1},e}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"main"},o.a.createElement("ul",{className:"search"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"GIF ME A MOVIE!"),o.a.createElement("h3",null,"A movie theatre for those who don't have time to watch a full movie"),o.a.createElement("div",{className:"search-bar"},o.a.createElement("label",{htmlFor:"userInput"},"Search a movie title"),o.a.createElement("input",{type:"text",id:"userInput",className:"search-input",placeholder:"Search for a movie",value:this.state.userInput,onChange:function(t){e.getUserInput(t),e.getMovieDetails()}}),o.a.createElement("i",{className:"fas fa-search search-icon"}))),this.state.errorMessage?o.a.createElement("p",null,"Your movie doesn't exist!"):null,o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"search-bar"},o.a.createElement("div",{className:"movie-results",id:"mainContent"},this.state.autoSuggestions?o.a.createElement(v,{movieSuggestions:this.state.movieSuggestions,getMovieKeywords:this.getMovieKeywords}):null))),this.state.showGifs?o.a.createElement(f,null):null,o.a.createElement("ul",null,this.state.showGifs?this.state.gifDataArray.map((function(t,a){console.log(t);var s=RegExp(/^(http)/);return s.test(e.state.movieImageUrl)?(console.log(s.test(e.state.movieImageUrl)),"Movie poster for"):(console.log(s.test(e.state.movieImageUrl)),"Placeholder image for the movie poster for"),o.a.createElement("div",{className:"movie-details"},o.a.createElement("ul",{className:"carousel"},o.a.createElement("li",{key:a,className:"carousel-cell"},o.a.createElement("p",null,"Hello!"),o.a.createElement("img",{className:"carousel-cell-image",src:t.images.original.webp,alt:t.title}))))})):null),this.state.noGifs?o.a.createElement("p",null,"Sorry, this movie is not currently playing at our theatre! Please try searching a different movie."):null,o.a.createElement("div",{className:"movie-tagline"},3===this.state.movieKeywords.length?o.a.createElement("p",null,"When a ".concat(this.state.movieKeywords[0].name," and a\n              ").concat(this.state.movieKeywords[1].name," fall in love, ").concat(this.state.movieKeywords[2].name," ensues")):null,2===this.state.movieKeywords.length?o.a.createElement("p",null,"When a ".concat(this.state.movieKeywords[0].name," and a\n              ").concat(this.state.movieKeywords[1].name," fall in love")):null,1===this.state.movieKeywords.length?o.a.createElement("p",null,"When a ".concat(this.state.movieKeywords[0].name," and.")):null),this.state.showButton?o.a.createElement("button",{onClick:this.resetState},"Watch another movie?"):null),this.state.showLoadingScreen?o.a.createElement("div",{className:"loading-screen"},o.a.createElement("p",null,"Getting the results...")):null)}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(o.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.9617d135.chunk.js.map